# 项目初始化脚本

这个脚本用于快速搭建AI文档管理系统的开发环境。

## 使用方法

1. 确保已安装Python 3.11+
2. 运行初始化脚本：
   ```powershell
   .\init-project.ps1
   ```

## 项目结构

```
ai_document_system/
├── requirements.txt           # 依赖包列表
├── setup.py                  # 项目安装配置
├── README.md                 # 项目说明
├── .gitignore               # Git忽略文件
├── .env.example             # 环境变量示例
├── config/                  # 配置目录
│   ├── __init__.py
│   ├── settings.py         # 应用设置
│   └── database.py         # 数据库配置
├── gui/                     # PyQt6界面代码
│   ├── __init__.py
│   ├── main_window.py      # 主窗口
│   ├── widgets/            # 自定义组件
│   │   ├── __init__.py
│   │   ├── search_widget.py
│   │   ├── document_editor.py
│   │   ├── graph_widget.py
│   │   └── file_tree.py
│   └── resources/          # 资源文件
│       ├── icons/
│       ├── styles/
│       └── ui/
├── api/                     # FastAPI后端
│   ├── __init__.py
│   ├── main.py             # API主入口
│   ├── routers/            # API路由
│   │   ├── __init__.py
│   │   ├── documents.py
│   │   ├── search.py
│   │   ├── tags.py
│   │   └── ai.py
│   ├── models/             # 数据模型
│   │   ├── __init__.py
│   │   ├── document.py
│   │   ├── tag.py
│   │   └── relation.py
│   └── services/           # 业务逻辑
│       ├── __init__.py
│       ├── document_service.py
│       ├── search_service.py
│       ├── ai_service.py
│       └── index_service.py
├── core/                    # 核心功能模块
│   ├── __init__.py
│   ├── document_manager.py  # 文档管理器
│   ├── search_engine.py     # 搜索引擎
│   ├── ai_service.py        # AI服务集成
│   ├── index_manager.py     # 索引管理器
│   └── utils.py            # 工具函数
├── data/                    # 数据目录
│   ├── documents.db        # SQLite数据库
│   ├── search_index/       # 搜索索引
│   ├── embeddings/         # 向量嵌入
│   └── templates/          # 文档模板
├── tests/                   # 测试代码
│   ├── __init__.py
│   ├── test_api/
│   ├── test_core/
│   ├── test_gui/
│   └── conftest.py
├── docs/                    # 文档
│   ├── api.md
│   ├── installation.md
│   └── user_guide.md
├── scripts/                 # 脚本工具
│   ├── init_db.py
│   ├── build_index.py
│   └── export_data.py
└── logs/                    # 日志文件
    ├── app.log
    └── error.log
```

## 核心组件说明

### 1. GUI层 (PyQt6)
- **main_window.py**: 主窗口，包含菜单栏、工具栏、状态栏
- **search_widget.py**: 搜索组件，支持全文搜索和过滤
- **document_editor.py**: 文档编辑器，支持Markdown编辑
- **graph_widget.py**: 知识图谱可视化组件
- **file_tree.py**: 文件树导航组件

### 2. API层 (FastAPI)
- **main.py**: FastAPI应用主入口
- **routers/**: API路由定义
- **models/**: SQLAlchemy数据模型
- **services/**: 业务逻辑处理

### 3. 核心层 (Core)
- **document_manager.py**: 文档CRUD操作
- **search_engine.py**: 搜索引擎实现
- **ai_service.py**: DeepSeek AI服务集成
- **index_manager.py**: 索引管理和维护

### 4. 配置管理
- **settings.py**: 应用配置管理
- **database.py**: 数据库连接配置
- **.env**: 环境变量配置

## 开发工作流

1. **环境搭建**
   ```bash
   python -m venv venv
   source venv/bin/activate  # Linux/Mac
   # 或
   venv\Scripts\activate     # Windows
   pip install -r requirements.txt
   ```

2. **数据库初始化**
   ```bash
   python scripts/init_db.py
   ```

3. **启动开发服务器**
   ```bash
   # 启动API服务
   uvicorn api.main:app --reload

   # 启动GUI应用
   python gui/main_window.py
   ```

4. **运行测试**
   ```bash
   pytest tests/
   ```

## 依赖包说明

### 必需依赖
- **PyQt6**: 桌面GUI框架
- **FastAPI**: 现代Web框架
- **SQLAlchemy**: ORM框架
- **Whoosh**: 全文搜索引擎
- **openai**: DeepSeek API客户端

### 开发依赖
- **pytest**: 测试框架
- **black**: 代码格式化
- **flake8**: 代码检查
- **mypy**: 类型检查
