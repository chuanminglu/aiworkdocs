@startuml å›¢é˜Ÿå¥åº·åº¦ç›‘æ§ç³»ç»Ÿæ¶æ„
!theme materia
skinparam defaultFontSize 12
skinparam packageFontSize 14
skinparam componentStyle rectangle

title TeamHealth Monitor - ç³»ç»ŸæŠ€æœ¯æ¶æ„å›¾

package "ğŸ–¥ï¸ è¡¨ç¤ºå±‚ (Presentation Layer)" {
    [ä¸»ç•Œé¢] as MainUI
    [ä»ªè¡¨æ¿ç»„ä»¶] as Dashboard
    [å›¾è¡¨ç»„ä»¶] as Charts
    [é¢„è­¦ç»„ä»¶] as Alerts
    
    MainUI --> Dashboard
    MainUI --> Charts  
    MainUI --> Alerts
}

package "ğŸ’¼ ä¸šåŠ¡é€»è¾‘å±‚ (Business Logic Layer)" {
    [æƒ…æ„Ÿåˆ†æå¼•æ“] as SentimentEngine
    [æŒ‡æ ‡è®¡ç®—å™¨] as MetricsCalculator
    [é¢„è­¦ç³»ç»Ÿ] as AlertSystem
    [æ•°æ®æ¨¡æ‹Ÿå™¨] as DataSimulator
    
    SentimentEngine --> MetricsCalculator
    MetricsCalculator --> AlertSystem
    DataSimulator --> SentimentEngine
}

package "ğŸ“Š æ•°æ®è®¿é—®å±‚ (Data Access Layer)" {
    [æ•°æ®åº“ç®¡ç†å™¨] as DatabaseManager
    [æ¶ˆæ¯å¤„ç†å™¨] as MessageProcessor
    [é…ç½®ç®¡ç†å™¨] as ConfigManager
    
    MessageProcessor --> DatabaseManager
}

package "ğŸ’¾ æ•°æ®å­˜å‚¨å±‚ (Data Storage Layer)" {
    database "SQLiteæ•°æ®åº“" as SQLiteDB {
        [messagesè¡¨] as MessagesTable
        [analysisè¡¨] as AnalysisTable  
        [metricsè¡¨] as MetricsTable
        [alertsè¡¨] as AlertsTable
    }
    
    file "æƒ…æ„Ÿè¯å…¸" as SentimentDict
    file "æ¶ˆæ¯æ¨¡æ¿" as MessageTemplates
    file "é…ç½®æ–‡ä»¶" as ConfigFiles
}

package "ğŸ› ï¸ å·¥å…·å±‚ (Utility Layer)" {
    [ä¸­æ–‡åˆ†è¯å™¨] as JiebaTokenizer
    [æ—¶é—´å¤„ç†å™¨] as TimeProcessor
    [æ—¥å¿—è®°å½•å™¨] as Logger
    [ä¸»é¢˜ç®¡ç†å™¨] as ThemeManager
}

' å‚ç›´ä¾èµ–å…³ç³»
Dashboard --> MetricsCalculator : è·å–å®æ—¶æŒ‡æ ‡
Charts --> MetricsCalculator : è·å–å†å²æ•°æ®
Alerts --> AlertSystem : è·å–é¢„è­¦ä¿¡æ¯

SentimentEngine --> JiebaTokenizer : æ–‡æœ¬åˆ†è¯
SentimentEngine --> SentimentDict : è¯å…¸æŸ¥è¯¢
MetricsCalculator --> TimeProcessor : æ—¶é—´è®¡ç®—
AlertSystem --> Logger : è®°å½•é¢„è­¦æ—¥å¿—

DatabaseManager --> SQLiteDB : æ•°æ®CRUD
MessageProcessor --> MessageTemplates : æ¨¡æ‹Ÿæ•°æ®ç”Ÿæˆ
ConfigManager --> ConfigFiles : é…ç½®è¯»å–

MainUI --> ThemeManager : ç•Œé¢ä¸»é¢˜

note top of MainUI
    **UIæ¡†æ¶**: Tkinter
    **å›¾è¡¨åº“**: Matplotlib
    **ä¸»é¢˜**: Materia Design
end note

note top of SentimentEngine  
    **æ ¸å¿ƒç®—æ³•**: è¯å…¸åŒ¹é… + æƒé‡è®¡ç®—
    **åˆ†è¯å·¥å…·**: jieba
    **å¤„ç†é€Ÿåº¦**: 1000æ¡/ç§’
end note

note top of SQLiteDB
    **æ•°æ®åº“**: SQLite 3.x
    **å­˜å‚¨æ–¹å¼**: æœ¬åœ°æ–‡ä»¶
    **æ•°æ®å¤§å°**: < 100MB
end note

note bottom of DataSimulator
    **åœºæ™¯æ”¯æŒ**: å¥åº·/å‹åŠ›/æ¢å¤
    **æ•°æ®é‡**: 100-140æ¡/å¤©
    **çœŸå®åº¦**: åŸºäºæ¨¡æ¿éšæœºç”Ÿæˆ
end note

' æ•°æ®æµå‘
DataSimulator ..> MessageProcessor : ç”Ÿæˆæ¨¡æ‹Ÿæ¶ˆæ¯
MessageProcessor ..> DatabaseManager : å­˜å‚¨æ¶ˆæ¯æ•°æ®
DatabaseManager ..> SentimentEngine : è¯»å–æ¶ˆæ¯
SentimentEngine ..> MetricsCalculator : åˆ†æç»“æœ
MetricsCalculator ..> Dashboard : æŒ‡æ ‡æ•°æ®

' é…ç½®æµå‘  
ConfigManager ..> SentimentEngine : è¯å…¸é…ç½®
ConfigManager ..> MetricsCalculator : æƒé‡é…ç½®
ConfigManager ..> AlertSystem : é¢„è­¦é˜ˆå€¼

@enduml
